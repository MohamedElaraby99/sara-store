@echo off
chcp 65001 >nul
title ุชูุธูู ุงูุจูุฆุฉ ุงููุญูููุฉ

echo.
echo ===============================================
echo        ุชูุธูู ุงูุจูุฆุฉ ุงููุญูููุฉ
echo ===============================================
echo.
echo โ๏ธ  ุชุญุฐูุฑ: ูุฐุง ุณูุญุฐู ุงูุจูุฆุฉ ุงููุญูููุฉ ูุงูุจูุงูุงุช!
echo.
echo ๐ ุณูุชู ุญุฐู:
echo    - ูุฌูุฏ portable_env (ุงูุจูุฆุฉ ุงููุญูููุฉ)
echo    - ููู library_dev.db (ูุงุนุฏุฉ ุงูุจูุงูุงุช)
echo    - ููู .env (ุงูุฅุนุฏุงุฏุงุช)
echo.
echo ๐ก ููููู ุฅุนุงุฏุฉ ุงูุฅุนุฏุงุฏ ุจุชุดุบูู setup_portable.bat
echo.

set /p choice="ูู ุฃูุช ูุชุฃูุฏุ (y/N): "
if /i "%choice%" neq "y" (
    echo.
    echo โ ุชู ุฅูุบุงุก ุงูุนูููุฉ
    pause
    exit /b 0
)

echo.
echo ๐งน ุจุฏุก ุนูููุฉ ุงูุชูุธูู...

:: ุญุฐู ุงูุจูุฆุฉ ุงููุญูููุฉ
if exist "portable_env" (
    echo ๐๏ธ  ุญุฐู ุงูุจูุฆุฉ ุงููุญูููุฉ...
    rmdir /s /q "portable_env"
    if exist "portable_env" (
        echo โ๏ธ  ูุดู ูู ุญุฐู ุงูุจูุฆุฉ ุงููุญูููุฉ (ูุฏ ุชููู ููุฏ ุงูุงุณุชุฎุฏุงู)
    ) else (
        echo โ ุชู ุญุฐู ุงูุจูุฆุฉ ุงููุญูููุฉ
    )
) else (
    echo ๐ญ ุงูุจูุฆุฉ ุงููุญูููุฉ ุบูุฑ ููุฌูุฏุฉ
)

:: ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช
if exist "library_dev.db" (
    echo ๐๏ธ  ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช...
    del /f "library_dev.db"
    if exist "library_dev.db" (
        echo โ๏ธ  ูุดู ูู ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    ) else (
        echo โ ุชู ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    )
) else (
    echo ๐ญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏุฉ
)

:: ุญุฐู ููู ุงูุฅุนุฏุงุฏุงุช
if exist ".env" (
    echo ๐๏ธ  ุญุฐู ููู ุงูุฅุนุฏุงุฏุงุช...
    del /f ".env"
    if exist ".env" (
        echo โ๏ธ  ูุดู ูู ุญุฐู ููู ุงูุฅุนุฏุงุฏุงุช
    ) else (
        echo โ ุชู ุญุฐู ููู ุงูุฅุนุฏุงุฏุงุช
    )
) else (
    echo ๐ญ ููู ุงูุฅุนุฏุงุฏุงุช ุบูุฑ ููุฌูุฏ
)

:: ุญุฐู ุงููููุงุช ุงููุคูุชุฉ
echo.
echo ๐งน ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ...

if exist "__pycache__" (
    rmdir /s /q "__pycache__"
    echo โ ุชู ุญุฐู __pycache__
)

if exist "*.pyc" (
    del /f "*.pyc"
    echo โ ุชู ุญุฐู ูููุงุช .pyc
)

if exist "instance" (
    echo ๐๏ธ  ุญุฐู ูุฌูุฏ instance...
    rmdir /s /q "instance"
    echo โ ุชู ุญุฐู ูุฌูุฏ instance
)

echo.
echo ===============================================
echo            ุงูุชูุช ุนูููุฉ ุงูุชูุธูู
echo ===============================================
echo.
echo โ ุชู ุชูุธูู ุงูุจูุฆุฉ ุงููุญูููุฉ ุจูุฌุงุญ!
echo.
echo ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:
echo    1. ุดุบู setup_portable.bat ูุฅุนุงุฏุฉ ุงูุฅุนุฏุงุฏ
echo    2. ุฃู ุดุบู quick_start.bat ููุฅุนุฏุงุฏ ูุงูุชุดุบูู
echo.
pause 